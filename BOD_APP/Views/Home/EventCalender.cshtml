
@{
    ViewBag.Title = "Calender";
    Layout = "~/Views/Shared/_LayoutNewTemp.cshtml";
}
<div class="page-content">
    <div class="page-title">
        <div class="row justify-content-between align-items-center">
            <div class="col d-flex align-items-center">
                <a href="#" class="text-white pr-3" data-toggle="tooltip" data-placement="left" data-original-title="Go back"><i class="far fa-angle-left"></i></a>
                <h5 class="fullcalendar-title h4 d-inline-block font-weight-400 mb-0 text-white">December 2020</h5>
            </div>
            <div class="col-lg-6 mt-3 mt-lg-0 text-lg-right">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <a href="#" class="fullcalendar-btn-prev btn btn-sm btn-neutral">
                        <i class="far fa-angle-left"></i>
                    </a>
                    <a href="#" class="fullcalendar-btn-next btn btn-sm btn-neutral">
                        <i class="far fa-angle-right"></i>
                    </a>
                </div>
                <div class="btn-group" role="group" aria-label="Basic example">
                    <a href="#" class="btn btn-sm btn-neutral" data-calendar-view="month">Month</a>
                    <a href="#" class="btn btn-sm btn-neutral" data-calendar-view="basicWeek">Week</a>
                    <a href="#" class="btn btn-sm btn-neutral" data-calendar-view="basicDay">Day</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <!-- Fullcalendar -->
            <div class="card overflow-hidden">
                <div class="calendar fc fc-unthemed fc-ltr" data-toggle="calendar" id="calendar">
                <div class="fc-toolbar fc-header-toolbar">
                    <div class="fc-left"></div><div class="fc-right"></div>
                    <div class="fc-center"></div><div class="fc-clear"></div></div>
                <div class="fc-view-container" style=""><div class="fc-view fc-month-view fc-basic-view" style="">
                    <table class=""><thead class="fc-head"><tr><td class="fc-head-container fc-widget-header">
                        <div class="fc-row fc-widget-header">
                        <table class=""><thead><tr><th class="fc-day-header fc-widget-header fc-sun">
                            <span>Sun</span></th><th class="fc-day-header fc-widget-header fc-mon">
                            <span>Mon</span></th><th class="fc-day-header fc-widget-header fc-tue">
                            <span>Tue</span></th><th class="fc-day-header fc-widget-header fc-wed">
                            <span>Wed</span></th><th class="fc-day-header fc-widget-header fc-thu">
                            <span>Thu</span></th><th class="fc-day-header fc-widget-header fc-fri">
                            <span>Fri</span></th><th class="fc-day-header fc-widget-header fc-sat">
                            <span>Sat</span></th></tr></thead></table></div></td></tr></thead>
                    <tbody class="fc-body"><tr><td class="fc-widget-content">
                        <div class="fc-scroller fc-day-grid-container" style="overflow: hidden; height: 729px;">
                        <div class="fc-day-grid fc-unselectable"><div class="fc-row fc-week fc-widget-content" style="height: 121px;">
                            <div class="fc-bg"><table class="">
                                <tbody><tr><td class="fc-day fc-widget-content fc-sun fc-other-month fc-past" data-date="2020-11-29"></td>
                                    <td class="fc-day fc-widget-content fc-mon fc-other-month fc-past" data-date="2020-11-30"></td>
                                    <td class="fc-day fc-widget-content fc-tue fc-past" data-date="2020-12-01"></td>
                                    <td class="fc-day fc-widget-content fc-wed fc-past" data-date="2020-12-02"></td>
                                    <td class="fc-day fc-widget-content fc-thu fc-past" data-date="2020-12-03"></td>
                                    <td class="fc-day fc-widget-content fc-fri fc-past" data-date="2020-12-04"></td>
                                    <td class="fc-day fc-widget-content fc-sat fc-past" data-date="2020-12-05"></td>
                                    </tr></tbody></table></div><div class="fc-content-skeleton">
                            <table><thead><tr>
                            <td class="fc-day-top fc-sun fc-other-month fc-past" data-date="2020-11-29">
                                <span class="fc-day-number">29</span></td>
                                <td class="fc-day-top fc-mon fc-other-month fc-past" data-date="2020-11-30">
                                <span class="fc-day-number">30</span></td><td class="fc-day-top fc-tue fc-past" data-date="2020-12-01">
                                <span class="fc-day-number">1</span></td><td class="fc-day-top fc-wed fc-past" data-date="2020-12-02">
                                <span class="fc-day-number">2</span></td><td class="fc-day-top fc-thu fc-past" data-date="2020-12-03">
                                <span class="fc-day-number">3</span></td><td class="fc-day-top fc-fri fc-past" data-date="2020-12-04">
                                <span class="fc-day-number">4</span></td><td class="fc-day-top fc-sat fc-past" data-date="2020-12-05"><span class="fc-day-number">5</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div>
                            <div class="fc-row fc-week fc-widget-content" style="height: 121px;"><div class="fc-bg">
                                <table class=""><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-past" data-date="2020-12-06"></td>
                                    <td class="fc-day fc-widget-content fc-mon fc-past" data-date="2020-12-07"></td><td class="fc-day fc-widget-content fc-tue fc-past" data-date="2020-12-08"></td><td class="fc-day fc-widget-content fc-wed fc-past" data-date="2020-12-09"></td><td class="fc-day fc-widget-content fc-thu fc-past" data-date="2020-12-10"></td><td class="fc-day fc-widget-content fc-fri fc-past" data-date="2020-12-11"></td><td class="fc-day fc-widget-content fc-sat fc-past" data-date="2020-12-12"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-top fc-sun fc-past" data-date="2020-12-06"><span class="fc-day-number">6</span></td><td class="fc-day-top fc-mon fc-past" data-date="2020-12-07"><span class="fc-day-number">7</span></td><td class="fc-day-top fc-tue fc-past" data-date="2020-12-08"><span class="fc-day-number">8</span></td><td class="fc-day-top fc-wed fc-past" data-date="2020-12-09"><span class="fc-day-number">9</span></td><td class="fc-day-top fc-thu fc-past" data-date="2020-12-10"><span class="fc-day-number">10</span></td><td class="fc-day-top fc-fri fc-past" data-date="2020-12-11"><span class="fc-day-number">11</span></td><td class="fc-day-top fc-sat fc-past" data-date="2020-12-12"><span class="fc-day-number">12</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content" style="height: 121px;"><div class="fc-bg"><table class=""><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-past" data-date="2020-12-13"></td><td class="fc-day fc-widget-content fc-mon fc-past" data-date="2020-12-14"></td><td class="fc-day fc-widget-content fc-tue fc-past" data-date="2020-12-15"></td><td class="fc-day fc-widget-content fc-wed fc-past" data-date="2020-12-16"></td><td class="fc-day fc-widget-content fc-thu fc-past" data-date="2020-12-17"></td><td class="fc-day fc-widget-content fc-fri fc-today " data-date="2020-12-18"></td><td class="fc-day fc-widget-content fc-sat fc-future" data-date="2020-12-19"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-top fc-sun fc-past" data-date="2020-12-13"><span class="fc-day-number">13</span></td><td class="fc-day-top fc-mon fc-past" data-date="2020-12-14"><span class="fc-day-number">14</span></td><td class="fc-day-top fc-tue fc-past" data-date="2020-12-15"><span class="fc-day-number">15</span></td><td class="fc-day-top fc-wed fc-past" data-date="2020-12-16"><span class="fc-day-number">16</span></td><td class="fc-day-top fc-thu fc-past" data-date="2020-12-17"><span class="fc-day-number">17</span></td><td class="fc-day-top fc-fri fc-today " data-date="2020-12-18"><span class="fc-day-number">18</span></td><td class="fc-day-top fc-sat fc-future" data-date="2020-12-19"><span class="fc-day-number">19</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content" style="height: 121px;"><div class="fc-bg"><table class=""><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-future" data-date="2020-12-20"></td><td class="fc-day fc-widget-content fc-mon fc-future" data-date="2020-12-21"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2020-12-22"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2020-12-23"></td><td class="fc-day fc-widget-content fc-thu fc-future" data-date="2020-12-24"></td><td class="fc-day fc-widget-content fc-fri fc-future" data-date="2020-12-25"></td><td class="fc-day fc-widget-content fc-sat fc-future" data-date="2020-12-26"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-top fc-sun fc-future" data-date="2020-12-20"><span class="fc-day-number">20</span></td><td class="fc-day-top fc-mon fc-future" data-date="2020-12-21"><span class="fc-day-number">21</span></td><td class="fc-day-top fc-tue fc-future" data-date="2020-12-22"><span class="fc-day-number">22</span></td><td class="fc-day-top fc-wed fc-future" data-date="2020-12-23"><span class="fc-day-number">23</span></td><td class="fc-day-top fc-thu fc-future" data-date="2020-12-24"><span class="fc-day-number">24</span></td><td class="fc-day-top fc-fri fc-future" data-date="2020-12-25"><span class="fc-day-number">25</span></td><td class="fc-day-top fc-sat fc-future" data-date="2020-12-26"><span class="fc-day-number">26</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content" style="height: 121px;"><div class="fc-bg"><table class=""><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-future" data-date="2020-12-27"></td><td class="fc-day fc-widget-content fc-mon fc-future" data-date="2020-12-28"></td><td class="fc-day fc-widget-content fc-tue fc-future" data-date="2020-12-29"></td><td class="fc-day fc-widget-content fc-wed fc-future" data-date="2020-12-30"></td><td class="fc-day fc-widget-content fc-thu fc-future" data-date="2020-12-31"></td><td class="fc-day fc-widget-content fc-fri fc-other-month fc-future" data-date="2021-01-01"></td><td class="fc-day fc-widget-content fc-sat fc-other-month fc-future" data-date="2021-01-02"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-top fc-sun fc-future" data-date="2020-12-27"><span class="fc-day-number">27</span></td><td class="fc-day-top fc-mon fc-future" data-date="2020-12-28"><span class="fc-day-number">28</span></td><td class="fc-day-top fc-tue fc-future" data-date="2020-12-29"><span class="fc-day-number">29</span></td><td class="fc-day-top fc-wed fc-future" data-date="2020-12-30"><span class="fc-day-number">30</span></td><td class="fc-day-top fc-thu fc-future" data-date="2020-12-31"><span class="fc-day-number">31</span></td><td class="fc-day-top fc-fri fc-other-month fc-future" data-date="2021-01-01"><span class="fc-day-number">1</span></td><td class="fc-day-top fc-sat fc-other-month fc-future" data-date="2021-01-02"><span class="fc-day-number">2</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div><div class="fc-row fc-week fc-widget-content" style="height: 124px;"><div class="fc-bg"><table class=""><tbody><tr><td class="fc-day fc-widget-content fc-sun fc-other-month fc-future" data-date="2021-01-03"></td><td class="fc-day fc-widget-content fc-mon fc-other-month fc-future" data-date="2021-01-04"></td><td class="fc-day fc-widget-content fc-tue fc-other-month fc-future" data-date="2021-01-05"></td><td class="fc-day fc-widget-content fc-wed fc-other-month fc-future" data-date="2021-01-06"></td><td class="fc-day fc-widget-content fc-thu fc-other-month fc-future" data-date="2021-01-07"></td><td class="fc-day fc-widget-content fc-fri fc-other-month fc-future" data-date="2021-01-08"></td><td class="fc-day fc-widget-content fc-sat fc-other-month fc-future" data-date="2021-01-09"></td></tr></tbody></table></div><div class="fc-content-skeleton"><table><thead><tr><td class="fc-day-top fc-sun fc-other-month fc-future" data-date="2021-01-03"><span class="fc-day-number">3</span></td><td class="fc-day-top fc-mon fc-other-month fc-future" data-date="2021-01-04"><span class="fc-day-number">4</span></td><td class="fc-day-top fc-tue fc-other-month fc-future" data-date="2021-01-05"><span class="fc-day-number">5</span></td><td class="fc-day-top fc-wed fc-other-month fc-future" data-date="2021-01-06"><span class="fc-day-number">6</span></td><td class="fc-day-top fc-thu fc-other-month fc-future" data-date="2021-01-07"><span class="fc-day-number">7</span></td><td class="fc-day-top fc-fri fc-other-month fc-future" data-date="2021-01-08"><span class="fc-day-number">8</span></td><td class="fc-day-top fc-sat fc-other-month fc-future" data-date="2021-01-09"><span class="fc-day-number">9</span></td></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table></div></div></div></div></td></tr></tbody></table></div></div></div>
            </div>
            
            
        </div>
    </div>
</div>

<script>
    function formatDate(date) {

        var d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();

        if (month.length < 2)
            month = '0' + month;
        if (day.length < 2)
            day = '0' + day;

        return [year, month, day].join('-');
    }

    var trainingId;

    $(document).ready(function () {  

        trainingId = getParameterByName('id');
        var traningPhase = [];

        var _data = JSON.stringify({
            global: {
                param1Value: trainingId
            }
        });

        $.ajax({
            type: "POST",
            url: "/ScriptJson/TrainingPhaseList",
            data: _data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                var pattern = /Date\(([^)]+)\)/;

                $.each(data, function (index, value) {

                    var results = pattern.exec(value.TP_FromDate);
                    var dt = new Date(parseFloat(results[1]));
                    var TP_FromDate = dt.getFullYear() + "-" + (dt.getMonth() + 1) + "-" + dt.getDate();

                    var results1 = pattern.exec(value.TP_ToDate);
                    var dt1 = new Date(parseFloat(results1[1]));
                    var TP_ToDate = dt1.getFullYear() + "-" + (dt1.getMonth() + 1) + "-" + dt1.getDate();


                    var event = {
                        title: value.TP_Title, start: formatDate(TP_FromDate), end: formatDate(TP_ToDate), editable: false
 };
                    $('#calendar').fullCalendar('renderEvent', event, true);
                    

                    traningPhase.push({
                        title: value.TP_Title,
                        start: formatDate(TP_FromDate),
                        end: formatDate(TP_ToDate)
                    });
                });


            }
        });

        console.log(traningPhase);
        //var event = traningPhase;
       

    });

    

  

    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

</script>